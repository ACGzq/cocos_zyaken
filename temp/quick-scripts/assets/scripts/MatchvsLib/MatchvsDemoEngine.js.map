{"version":3,"sources":["MatchvsDemoEngine.js"],"names":["mvs","require","Glb","response","MatchvsDemoEngine","prototype","init","channel","platform","bind","gameVersion","result","engine","gameID","appKey","console","log","premiseInit","endPoint","registerUser","login","userID","token","DeviceID","reconnect","logout","uninit","joinRandomRoom","mxaNumer","profile","getUserProfile","joinRoomWithProperties","matchinfo","leaveRoom","obj","name","JSON","stringify","joinOver","joinOpen","getRoomListEx","roomFilter","joinRoom","roomID","createRoom","kickPlayer","setRoomProperty","roomProperty","getRoomDetail","sendEvent","msg","data","sendEventEx","type","setFrameSync","frameRate","enableGS","other","cacheFrameMS","sendFrameEvent","cpProto","op","userProfile","avatar","userProfileStr","module","exports"],"mappings":"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","file":"MatchvsDemoEngine.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\MatchvsLib","sourcesContent":["let mvs = require(\"Matchvs\");\nlet Glb = require(\"../interface/Glb\");\nlet response = require(\"MatchvsDemoResponse\");\n\nfunction MatchvsDemoEngine() {\n\n}\n\n/**\n * 初始化\n * @param channel\n * @param platform\n * @param gameID\n */\nMatchvsDemoEngine.prototype.init = function(channel, platform){\n        response.prototype.bind();\n        let gameVersion = 1;\n        let result = mvs.engine.init(mvs.response, channel, platform,Glb.gameID,Glb.appKey,gameVersion);\n        console.log(\"初始化result\"+result);\n        return result;\n};\n\n/**\n * 独立部署使用的初始化接口\n * @param {string} endPoint\n * @param {number} gameID\n */\nMatchvsDemoEngine.prototype.premiseInit = function (endPoint, gameID) {\n    response.prototype.bind();\n    let result = mvs.engine.premiseInit(mvs.response, endPoint, gameID);\n    console.log(\"独立部署初始化result\"+result);\n    return result;\n};\n\n/**\n * 注册\n * @returns {number|*}\n */\nMatchvsDemoEngine.prototype.registerUser = function() {\n    let result = mvs.engine.registerUser();\n    console.log(\"注册result\"+result);\n    return result;\n};\n\n/**\n * 登录\n * @param userID\n * @param token\n * @returns {DataView|*|number|void}\n */\nMatchvsDemoEngine.prototype.login = function(userID,token){\n    let DeviceID = 'abcdef';\n    let result = mvs.engine.login(userID, token,DeviceID);\n    console.log(\"登录result\"+result);\n    return result;\n};\n\n/**\n * 断线重连\n * @returns {*|number}\n */\nMatchvsDemoEngine.prototype.reconnect = function () {\n    let result = mvs.engine.reconnect();\n    console.log(\"重连result\"+result);\n    return result;\n};\n\n/**\n * 退出游戏\n * @returns {DataView|number|*}\n */\nMatchvsDemoEngine.prototype.logout = function () {\n    let result = mvs.engine.logout(\"退出游戏\");\n    console.log('退出游戏result'+result);\n    return result;\n};\n\n/**\n * 反初始化\n */\nMatchvsDemoEngine.prototype.uninit =function () {\n    let result = mvs.engine.uninit();\n    console.log('反初始化result'+result);\n    return result;\n};\n\n/**\n * 随机匹配\n * @param mxaNumer 房间最大人数\n * @param profile 负载消息，可以用来传送玩家姓名 等级等信息\n * @returns {number}\n */\nMatchvsDemoEngine.prototype.joinRandomRoom = function(mxaNumer,profile){\n    let result = mvs.engine.joinRandomRoom(mxaNumer, MatchvsDemoEngine.prototype.getUserProfile(profile));\n    console.log(\"随机匹配result\"+result);\n    return result;\n};\n\n/**\n * 属性匹配\n * @param matchinfo\n * @param profile\n */\nMatchvsDemoEngine.prototype.joinRoomWithProperties = function (matchinfo,profile) {\n    let result = mvs.engine.joinRoomWithProperties(matchinfo, MatchvsDemoEngine.prototype.getUserProfile(profile));\n    console.log(\"属性匹配result\"+result);\n    return result;\n};\n\n/**\n * 离开房间\n */\nMatchvsDemoEngine.prototype.leaveRoom = function () {\n    let obj = {name: Glb.name, profile: '主动离开了房间'};\n    let result = mvs.engine.leaveRoom(JSON.stringify(obj));\n    console.log(Glb.name+\"主动离开房间result\"+result);\n    return result;\n};\n\n/**\n * 关闭房间\n * @returns {number}\n */\nMatchvsDemoEngine.prototype.joinOver = function(){\n    let result = mvs.engine.joinOver(\"关闭房间\");\n    console.log(\"joinOver result\"+result);\n    return result;\n};\n\n/**\n * 打开房间\n * @returns {number}\n */\nMatchvsDemoEngine.prototype.joinOpen = function(){\n    let result = mvs.engine.joinOpen(\"打开房间\");\n    console.log(\"joinOpen result\"+result);\n    return result;\n};\n\n/**\n * 获取房间列表扩展接口\n * @param roomFilter\n * @returns {*|number}\n */\nMatchvsDemoEngine.prototype.getRoomListEx = function (roomFilter) {\n    let result = mvs.engine.getRoomListEx(roomFilter);\n    console.log(\"加载房间列表扩展接口 result\"+result);\n    return result;\n};\n\n/**\n * 加入指定房间\n * @param roomID\n * @param profile\n */\nMatchvsDemoEngine.prototype.joinRoom = function (roomID,profile) {\n    let result = mvs.engine.joinRoom(roomID, MatchvsDemoEngine.prototype.getUserProfile(profile));\n    console.log(\"加入指定房间 result\"+result);\n    return result;\n};\n\n/**\n * 创建指定房间\n * @param roomFilter\n * @param profile\n * @returns {number}\n */\nMatchvsDemoEngine.prototype.createRoom = function (roomFilter,profile) {\n    let result = mvs.engine.createRoom(roomFilter, MatchvsDemoEngine.prototype.getUserProfile(profile));\n    console.log(\"创建指定类型房间 result\"+result);\n    return result;\n};\n\n/**\n * 踢出指定玩家\n * @param userID\n * @param profile\n */\nMatchvsDemoEngine.prototype.kickPlayer = function (userID,profile) {\n    let obj = {name: profile, profile: profile + '被踢出了房间'};\n    let result = mvs.engine.kickPlayer(userID, JSON.stringify(obj));\n    console.log(userID+\"被踢出游戏 result\"+result);\n    return result;\n};\n\n/**\n * 修改房间属性\n * @param roomID\n * @param roomProperty\n * @returns {*}\n */\nMatchvsDemoEngine.prototype.setRoomProperty = function(roomID,roomProperty){\n    let result = mvs.engine.setRoomProperty(roomID, roomProperty);\n    console.log(\"修改房间属性 result\"+ result);\n    return result;\n};\n\n\n/**\n * 修改房间属性\n * @param roomID\n * @returns {*}\n */\nMatchvsDemoEngine.prototype.getRoomDetail = function(roomID){\n    let result = mvs.engine.getRoomDetail(roomID);\n    console.log(\"获取房间详情 result\"+ result);\n    return result;\n};\n\nMatchvsDemoEngine.prototype.sendEvent = function (msg) {\n    let data = mvs.engine.sendEvent(msg);\n    // console.log(\"发送信息 result\"+ data.result);\n    return data.result;\n};\n\n/**\n * 发送消息扩展\n * @param type 消息类型。0表示转发给房间成员；1表示转发给game server；2表示转发给房间成员及game server\n * @param msg 消息内容\n * @returns {*}\n */\nMatchvsDemoEngine.prototype.sendEventEx = function (type,msg) {\n    let data = mvs.engine.sendEventEx(type, msg, 1, []);\n    return data.result;\n};\n/**\n * 设置帧率\n * @param frameRate\n * @returns {DataView|number|*}\n */\nMatchvsDemoEngine.prototype.setFrameSync = function (frameRate) {\n    let enableGS = 1;\n    let other = {cacheFrameMS:0};\n    let result = mvs.engine.setFrameSync(frameRate,enableGS,other);\n    console.log('设置帧率 result：'+result);\n    return result;\n};\n\n/**\n * 帧同步发送\n * @param cpProto\n * @returns {DataView|number|*}\n */\nMatchvsDemoEngine.prototype.sendFrameEvent = function (cpProto) {\n    let op = 0; // 0-只发送客户端 1-只发送GS 2-客户端和GS\n    let result = mvs.engine.sendFrameEvent(cpProto,op);\n    return result;\n};\n\n\n    /**\n * 获取进入房间负载信息\n * @param profile\n * @returns {string}\n */\nMatchvsDemoEngine.prototype.getUserProfile = function (profile) {\n    let userProfile = {name: Glb.name, avatar: Glb.avatar, profile: profile};\n    let userProfileStr = JSON.stringify(userProfile);\n    console.log(\"进入房间负载信息\"+userProfileStr);\n    return userProfileStr;\n};\n\n\n\nmodule.exports = MatchvsDemoEngine;"]}