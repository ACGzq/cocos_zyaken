{"version":3,"sources":["CreateRoom.js"],"names":["engine","require","GLB","msg","cc","Class","extends","Component","properties","labelMyRoomID","default","type","Label","labelUserName","labelUserName2","nickName","leaveRoom","Node","btnStartGame","kickPlayer2","seleButton","mapString","userList","labelUserID2","ownerLogo","ownerLogo2","userIDfontSize","onLoad","nameViewList","userIDViewList","userOwnewLogoList","number1","number2","self","string","userID","roomID","prototype","getRoomDetail","initEvent","on","EventType","TOUCH_END","undefined","kickPlayer","fontSize","leaveRoom1","length","MAX_PLAYER_COUNT","event","action","EVENT_GAME_START","sendEventEx","JSON","stringify","joinOver","mapType","setRoomProperty","systemEvent","MATCHVS_ERROE_MSG","onEvent","MATCHVS_KICK_PLAYER","MATCHVS_KICK_PLAYER_NOTIFY","MATCHVS_JOIN_ROOM_RSP","MATCHVS_SET_ROOM_PROPETY","MATCHVS_SET_ROOM_PROPETY_NOTIFY","MATCHVS_JOIN_ROOM_NOTIFY","MATCHVS_ROOM_DETAIL","MATCHVS_LEAVE_ROOM_NOTIFY","MATCHVS_SEND_EVENT_NOTIFY","MATCHVS_NETWORK_STATE_NOTIFY","eventData","data","console","log","push","roomUserInfo","initUserView","userProfile","removeView","kickPlayerRsp","kickPlayerNotify","setRoomPropertyResponse","rsp","joinRoom","i","userInfos","owner","leaveRoomInfo","parse","eventInfo","cpProto","startGame","errorCode","director","loadScene","netNotify","state","roomProperty","getChildByName","getComponent","isRoomOwner","active","buttonIsShow","name","info","splice","isShow","removeEvent","off","onDestroy"],"mappings":"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","file":"CreateRoom.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\interface","sourcesContent":["let engine = require(\"../MatchvsLib/MatchvsDemoEngine\");\nlet GLB = require(\"Glb\");\nlet msg = require(\"../MatchvsLib/MatvhvsMessage\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        labelMyRoomID: {\n            default: null,\n            type: cc.Label\n        },\n        labelUserName: {\n            default: null,\n            type: cc.Label\n        },\n        labelUserName2: {\n            default: null,\n            type: cc.Label\n        },\n        \n        nickName: {\n            default: null,\n            type: cc.Label\n        },\n        leaveRoom: cc.Node,\n        btnStartGame: cc.Node,\n        kickPlayer2: cc.Node,  \n        seleButton: cc.Node,\n        mapString: {\n            default: null,\n            type: cc.Label\n        },\n        userList :[],\n        labelUserID2:cc.Label,\n        ownerLogo:cc.Node,\n        ownerLogo2:cc.Node,\n        userIDfontSize:26,\n    },\n\n\n    onLoad () {\n        this.nameViewList = [this.labelUserName2];\n        this.userIDViewList = [this.labelUserID2];\n        this.userOwnewLogoList = [this.ownerLogo2];\n        GLB.number1 = \"\";\n        GLB.number2 = \"\";\n        \n        let self = this;\n        self.nickName.string = '用户ID：'+GLB.userID;\n        // roomID的全局赋值要慎重使用，离开房间记得置空\n        if (GLB.roomID !== \"\") {\n            engine.prototype.getRoomDetail(GLB.roomID);\n        }\n        this.initEvent();\n        this.kickPlayer2.on(cc.Node.EventType.TOUCH_END, function(){\n            let userID = self.labelUserID2.string;\n            if (userID !== undefined && userID !== 2) {\n                engine.prototype.kickPlayer(userID,self.labelUserName2.string);\n                self.labelUserID2.string = 2;\n                self.labelUserID2.fontSize = 80;\n                self.labelUserName2.string = \"待加入\";\n            }\n        });\n      \n        this.leaveRoom.on(cc.Node.EventType.TOUCH_END, function(){\n            engine.prototype.leaveRoom(\"\");\n            self.leaveRoom1();\n        });\n        this.btnStartGame.on(cc.Node.EventType.TOUCH_END, function(){\n            if (self.userList.length === GLB.MAX_PLAYER_COUNT-1) {\n                let event = {\n                    action: msg.EVENT_GAME_START,\n                };\n                engine.prototype.sendEventEx(0,JSON.stringify(event));\n                engine.prototype.joinOver();\n            } else {\n                // self.labelLog('房间人数小于' + GLB.MAX_PLAYER_COUNT);\n            }\n        });\n        this.seleButton.on(cc.Node.EventType.TOUCH_END, function(){\n            let mapType = self.mapString.string;\n            if (mapType == \"森林\") {\n                engine.prototype.setRoomProperty(GLB.roomID,\"黑夜\")\n            } else {\n                engine.prototype.setRoomProperty(GLB.roomID,\"森林\")\n            }\n        });\n    },\n\n    /**\n     * 注册对应的事件监听和把自己的原型传递进入，用于发送事件使用\n     */\n    initEvent () {\n        cc.systemEvent.on(msg.MATCHVS_ERROE_MSG,this.onEvent,this);\n        cc.systemEvent.on(msg.MATCHVS_KICK_PLAYER,this.onEvent,this);\n        cc.systemEvent.on(msg.MATCHVS_KICK_PLAYER_NOTIFY,this.onEvent,this);\n        cc.systemEvent.on(msg.MATCHVS_JOIN_ROOM_RSP,this.onEvent,this);\n        cc.systemEvent.on(msg.MATCHVS_SET_ROOM_PROPETY,this.onEvent,this);\n        cc.systemEvent.on(msg.MATCHVS_SET_ROOM_PROPETY_NOTIFY,this.onEvent,this);\n        cc.systemEvent.on(msg.MATCHVS_JOIN_ROOM_NOTIFY,this.onEvent,this);\n        cc.systemEvent.on(msg.MATCHVS_ROOM_DETAIL,this.onEvent,this);\n        cc.systemEvent.on(msg.MATCHVS_LEAVE_ROOM_NOTIFY,this.onEvent,this);\n        cc.systemEvent.on(msg.MATCHVS_SEND_EVENT_NOTIFY,this.onEvent,this);\n        cc.systemEvent.on(msg.MATCHVS_NETWORK_STATE_NOTIFY,this.onEvent,this);\n    },\n\n    /**\n     * 时间接收\n     * @param event\n     */\n    onEvent (event){\n        let eventData = event.data;\n        console.log(\"onEvent:\",eventData);\n        switch(event.type) {\n            case msg.MATCHVS_JOIN_ROOM_NOTIFY:\n                this.userList.push(eventData.roomUserInfo);\n                this.initUserView(eventData.roomUserInfo.userProfile,eventData.roomUserInfo.userID,0);\n                break;\n            case msg.MATCHVS_KICK_PLAYER:\n                this.removeView(eventData.kickPlayerRsp);\n                break;\n            case msg.MATCHVS_KICK_PLAYER_NOTIFY:\n                this.removeView(eventData.kickPlayerNotify);\n                break;\n            case msg.MATCHVS_SET_ROOM_PROPETY:\n                this.setRoomPropertyResponse(eventData.rsp);\n                break;\n            case msg.MATCHVS_SET_ROOM_PROPETY_NOTIFY:\n                this.setRoomPropertyResponse(eventData.rsp);\n                break;\n            case msg.MATCHVS_ROOM_DETAIL:\n                this.joinRoom(eventData.rsp);\n                for (let i in eventData.rsp.userInfos) {\n                    if (GLB.userID !== eventData.rsp.userInfos[i].userID) {\n                        this.initUserView(eventData.rsp.userInfos[i].userProfile,eventData.rsp.userInfos[i].userID,eventData.rsp.owner);\n                        this.userList.push(eventData.rsp.userInfos[i]);\n                    }\n                }\n                break;\n            case msg.MATCHVS_LEAVE_ROOM_NOTIFY:\n                this.removeView(eventData.leaveRoomInfo)\n                break;\n            case msg.MATCHVS_SEND_EVENT_NOTIFY:\n                let data = JSON.parse(eventData.eventInfo.cpProto);\n                if (data.action == msg.EVENT_GAME_START) {\n                    this.startGame();\n                }\n                break;\n            case msg.MATCHVS_ERROE_MSG:\n                if (eventData.errorCode !== 400) {\n                    cc.director.loadScene('Login');\n                }\n                break;\n            case msg.MATCHVS_NETWORK_STATE_NOTIFY:\n                if (eventData.netNotify.state === 1) {\n                    engine.prototype.kickPlayer(eventData.netNotify.userID,\"你断线了，被提出房间\");\n                }\n                break;\n        }\n    },\n\n    setRoomPropertyResponse: function (rsp) {\n        if (rsp.roomProperty == '森林') {\n            this.mapString.string = rsp.roomProperty;\n            GLB.mapType = rsp.roomProperty;\n            this.seleButton.getChildByName(\"Label\").getComponent(cc.Label).string = '切换为黑夜';\n        } else {\n            this.mapString.string = rsp.roomProperty;\n            GLB.mapType = rsp.roomProperty;\n            this.seleButton.getChildByName(\"Label\").getComponent(cc.Label).string = '切换为森林';\n        }\n    },\n\n\n\n\n    /**\n     * 房主是通过joinRoom和getRoomDetail获得房间信息 ,非房主玩家是通过getRoomDetail获得房间信息\n     * @param rsp\n     */\n    joinRoom: function (rsp) {\n        if (rsp.owner === GLB.userID) {\n            GLB.isRoomOwner = true;\n            this.ownerLogo.active = true;\n        } else {\n            GLB.isRoomOwner = false;\n            this.ownerLogo.active = false;\n        }\n        this.buttonIsShow(GLB.isRoomOwner);\n        if (GLB.roomID !== \"\") {\n            this.labelMyRoomID.string = GLB.roomID;\n        } else {\n            this.labelMyRoomID.string = rsp.roomID;\n            GLB.roomID = rsp.roomID;\n        }\n        this.labelUserName.string = GLB.name;\n        GLB.mapType = rsp.roomProperty;\n        this.setRoomPropertyResponse(rsp);\n    },\n\n    /**\n     * 展示玩家信息\n     */\n    initUserView :function(userProfile,userID,owner){\n        for(let i = 0; i < this.nameViewList.length; i++) {\n            let info = JSON.parse(userProfile);\n            if (this.nameViewList[i].string === \"待加入\") {\n                this.userIDViewList[i].string = userID;\n                this.userIDViewList[i].fontSize = this.userIDfontSize;\n                this.nameViewList[i].string = info.name;\n                if(userID === owner) {\n                    this.userOwnewLogoList[i].active = true;\n                }\n                return;\n            }\n        }\n    },\n\n    /**\n     * 玩家退出将玩家的信息从页面上消失\n     * @param info\n     */\n    removeView:function (info) {\n        let userID = info.userID;\n        for(let i = 0; i < this.userList.length;i++ ) {\n            if(userID === this.userList[i].userID) {\n                this.userList.splice(i,1);\n                this.nameViewList[i].string = \"待加入\";\n                this.userIDViewList[i].string = i+2;\n                this.userIDViewList[i].fontSize = 80;\n                this.userOwnewLogoList[i].active = false;\n            }\n        }\n        if (userID === GLB.userID) {\n            this.leaveRoom1();\n        }\n        for(let i = 0; i < this.userIDViewList.length;i++) {\n            if (info.owner === this.userIDViewList[i].string) {\n                this.userOwnewLogoList[i].active = true;\n            }\n        }\n\n\n\n\n        if (info.owner === GLB.userID) {\n            this.ownerLogo.active = true;\n            GLB.isRoomOwner = true;\n            this.buttonIsShow(true);\n        }\n    },\n\n    /**\n     * 房主和非房主玩家的功能按键显示和隐藏\n     * @param isShow\n     */\n    buttonIsShow :function (isShow) {\n        if (isShow) {\n            this.seleButton.active = true;\n            this.btnStartGame.active = true;\n            this.kickPlayer2.active = true;\n           // this.kickPlayer3.active = true;\n        } else {\n            this.seleButton.active = false;\n            this.btnStartGame.active = false;\n            this.kickPlayer2.active = false;\n           // this.kickPlayer3.active = false;\n        }\n    },\n\n    /**\n     * 移除监听\n     */\n    removeEvent() {\n        cc.systemEvent.off(msg.MATCHVS_ERROE_MSG,this.onEvent);\n        cc.systemEvent.off(msg.MATCHVS_KICK_PLAYER,this.onEvent);\n        cc.systemEvent.off(msg.MATCHVS_KICK_PLAYER_NOTIFY,this.onEvent);\n        cc.systemEvent.off(msg.MATCHVS_JOIN_ROOM_RSP,this.onEvent);\n        cc.systemEvent.off(msg.MATCHVS_SET_ROOM_PROPETY,this.onEvent);\n        cc.systemEvent.off(msg.MATCHVS_SET_ROOM_PROPETY_NOTIFY,this.onEvent);\n        cc.systemEvent.off(msg.MATCHVS_JOIN_ROOM_NOTIFY,this.onEvent);\n        cc.systemEvent.off(msg.MATCHVS_ROOM_DETAIL,this.onEvent);\n        cc.systemEvent.off(msg.MATCHVS_LEAVE_ROOM_NOTIFY,this.onEvent);\n        cc.systemEvent.off(msg.MATCHVS_SEND_EVENT_NOTIFY,this.onEvent);\n        cc.systemEvent.off(msg.MATCHVS_NETWORK_STATE_NOTIFY,this.onEvent);\n    },\n\n\n    /**\n     * 生命周期，销毁\n     */\n    onDestroy () {\n        this.removeEvent();\n        console.log(\"create Room 页面销毁\");\n    },\n\n\n    leaveRoom1:function () {\n        GLB.roomID = \"\"\n        cc.director.loadScene('Lobby');\n    },\n\n    startGame:function () {\n        cc.director.loadScene('zyankenGame')\n    },\n\n\n});\n"]}